<style type = "text/css">
.form_container {
  margin-left: 35px;
  border:1px solid maroon;
  box-shadow: 1px 1px 5px rgba(0,0,0,0.2);
  width: 300px;
  text-align: center;
  background-color: white;
  float: left;
  margin-right: 100px;
}
.form_header {
  text-align: center;
  background-color: maroon;
  color: white;
  padding: 10px;
  margin-bottom:15px;
}
.committee_input {
  width: 25px;
}
.inputs {
  padding: 15px;
}
</style>

<div class = "form_container">
  <div class = "form_header">new applicant form</div>
<%= form_for @applicant do |f| %>
<% if @deliberation %>
  <b><%= @deliberation.name %></b>
  <%= f.text_field :deliberation_id, :value=>@deliberation.id, :style=>"display:none;" %><br />
<% end %>
<div class = "inputs">
  <%= f.label :name %>:
  <%= f.text_field :name , :class => "name_input text_input" %><br />

  <%= f.label "email" %>:
  <%= f.text_field :email, :class => "email_input text_input"  %><br />

  <%= f.label "first choice" %>:
  <%= f.text_field :preference1, :class => "committee_input text_input" %><br />

  <%= f.label "second choice" %>:
  <%= f.text_field :preference2, :class => "committee_input text_input"  %><br />

  <%= f.label "third choice" %>:
  <%= f.text_field :preference3, :class => "committee_input text_input"  %><br />

<br>

  <%= f.submit :class => "btn" %>
</div>
<!-- end of inputs div -->
<% end %>

</div>
<!-- end of form_div -->


<style type = "text/css">
.error {
  color: red;
}
</style>
<script type = "text/javascript">
$(document).ready(function(){
  var names = [];
  <% @names.each do |name| %>
  names.push('<%= name %>'.toLowerCase());
  <% end %>
  $(".name_input").keyup(function(){
    var input = $(this).val();
    if(names.indexOf(input.toLowerCase()) != -1){
      $(this).addClass("error");
    }
    else{
      if($(this).hasClass("error")){
        $(this).removeClass("error");
      }
    }
  });
  var valid_committees = ["1","3","4","5","6","7","9","10","11"];
  $(".committee_input").keyup(function(){
    var input = $(this).val();
    if(valid_committees.indexOf(input) == -1){
      $(this).addClass("error");
    }
    else{
      if($(this).hasClass("error")){
        $(this).removeClass("error");
      }
    }
  });
});
</script>